<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Madridista Station - دليل إدارة الصفحة</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #0A2647;
            --secondary-color: #144272;
            --accent-orange: #FF9800;
            --accent-blue: #1C7ED6;
            --light-bg: #EAF1FA;
            --text-dark: #333;
            --text-light: #666;
            --spacing: 16px;
            --header-height: 70px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: #000;
            color: white;
            line-height: 1.6;
            overflow-x: hidden;
            position: relative;
            text-align: center;
        }
        
        /* خلفية متحركة - نجوم */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: -3;
        }
        
        .star {
            position: absolute;
            background: #fff;
            border-radius: 50%;
            animation: twinkle linear infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 1; }
        }
        
        .twinkling {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: transparent;
            z-index: -2;
            animation: animTwinkling 200s linear infinite;
            opacity: 0.5;
        }
        
        .gradient-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(10, 38, 71, 0.8), rgba(20, 66, 114, 0.6));
            z-index: -1;
        }

        @keyframes animTwinkling {
            from {background-position: 0 0;}
            to {background-position: 10000px -5000px;}
        }
        
        /* شريط التقدم */
        .progress-container {
            position: fixed;
            top: 0;
            right: 0;
            width: 100%;
            height: 4px;
            background: transparent;
            z-index: 1000;
        }
        
        .progress-bar {
            height: 4px;
            background: linear-gradient(to right, var(--accent-orange), var(--accent-blue));
            width: 0%;
            transition: width 0.2s ease;
        }
        
        /* التنقل العائم */
        .floating-nav {
            position: fixed;
            bottom: 20px;
            right: 50%;
            transform: translateX(50%);
            background: rgba(10, 38, 71, 0.9);
            backdrop-filter: blur(10px);
            padding: 10px 15px;
            border-radius: 50px;
            display: flex;
            gap: 8px;
            z-index: 999;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
            transition: transform 0.3s ease;
        }
        
        .floating-nav.hidden {
            transform: translateX(50%) translateY(100px);
        }
        
        .floating-nav-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-orange), var(--accent-blue));
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .floating-nav-btn:hover, .floating-nav-btn.active {
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(255, 152, 0, 0.7);
        }
        
        .content-wrapper {
            position: relative;
            z-index: 1;
            background: rgba(10, 38, 71, 0.85);
            margin: 20px;
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.6);
            padding: 20px;
            max-width: 1000px;
            margin-left: auto;
            margin-right: auto;
            backdrop-filter: blur(5px);
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' width='100' height='100'%3E%3Ccircle cx='50' cy='50' r='2' fill='%23ffffff' opacity='0.1'/%3E%3C/svg%3E");
            animation: backgroundMove 20s linear infinite;
        }
        
        @keyframes backgroundMove {
            from { background-position: 0 0; }
            to { background-position: 100px 100px; }
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.7);
            position: relative;
        }
        
        .description {
            font-size: 1.1rem;
            max-width: 800px;
            margin: 0 auto;
            position: relative;
        }
        
        .preview-panel {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            margin: 0 auto;
            color: var(--text-dark);
        }
        
        .section {
            margin-bottom: 25px;
            border: 1px solid var(--light-bg);
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }
        
        .section.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .section::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 5px;
            height: 0;
            background: linear-gradient(to bottom, var(--accent-orange), var(--accent-blue));
            transition: height 0.3s ease;
        }
        
        .section:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .section:hover::before {
            height: 100%;
        }
        
        .section-header {
            background-color: var(--light-bg);
            padding: 15px 20px;
            font-weight: 600;
            color: var(--secondary-color);
            border-bottom: 1px solid #d0d9e6;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }
        
        .section-content {
            padding: 20px;
            background: white;
            max-height: 1000px;
            overflow: hidden;
            transition: max-height 0.5s ease, padding 0.5s ease;
        }
        
        .section.collapsed .section-content {
            max-height: 0;
            padding-top: 0;
            padding-bottom: 0;
        }
        
        .section-content ul {
            padding-right: 20px;
            margin-bottom: 0;
            text-align: right;
        }
        
        .section-content li {
            margin-bottom: 10px;
            position: relative;
            padding-right: 25px;
        }
        
        .section-content li::before {
            content: '•';
            color: var(--accent-orange);
            font-weight: bold;
            position: absolute;
            right: 0;
            font-size: 1.5rem;
            top: -3px;
        }
        
        .logo-preview {
            text-align: center;
            margin-bottom: 25px;
            position: relative;
        }
        
        .logo-container {
            width: 220px;
            height: 220px;
            margin: 0 auto;
            border-radius: 50%;
            overflow: hidden;
            border: 5px solid #fff;
            box-shadow: 0 0 35px rgba(255, 165, 0, 0.9), 0 0 35px rgba(0, 123, 255, 0.9);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
        }
        
        .logo-container::after {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--accent-orange), var(--accent-blue), var(--accent-orange));
            z-index: -1;
            animation: rotate 3s linear infinite;
            opacity: 0.7;
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .logo-container:hover {
            transform: scale(1.15);
            box-shadow: 0 0 60px rgba(255, 165, 0, 1), 0 0 60px rgba(0, 123, 255, 1);
        }
        
        .logo-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .page-title {
            margin: 20px 0;
            font-size: 42px;
            letter-spacing: 3px;
            font-weight: bold;
            background: linear-gradient(270deg, #ff9900, #1c7ed6, #ff7300, #339af0);
            background-size: 600% 600%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientShift 6s ease infinite;
            text-shadow: 0 0 20px rgba(255,165,0,0.8), 0 0 25px rgba(28,126,214,0.8);
        }
        
        .slogan {
            margin-top: 15px;
            font-size: 20px;
            font-weight: 500;
            background: linear-gradient(270deg, #1c7ed6, #ff7300, #339af0, #ff9900);
            background-size: 600% 600%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientShift 8s ease infinite;
            text-shadow: 0 0 10px rgba(255,165,0,0.7), 0 0 15px rgba(28,126,214,0.7);
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .navigation {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }
        
        .nav-btn {
            background: linear-gradient(135deg, var(--accent-orange), var(--accent-blue));
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            font-weight: 500;
        }
        
        .nav-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .footer {
            margin-top: 30px;
            padding: 15px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 10px;
            color: white;
        }
        
        .social-links {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 10px;
        }
        
        .social-links a {
            color: white;
            font-size: 1.5rem;
            transition: transform 0.3s ease, color 0.3s ease;
        }
        
        .social-links a:hover {
            transform: translateY(-5px);
            color: var(--accent-orange);
        }
        
        /* زر العودة للأعلى */
        .back-to-top {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-orange), var(--accent-blue));
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s ease;
            z-index: 999;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
        }
        
        .back-to-top:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }
        
        /* زر تغيير المظهر */
        .theme-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-orange), var(--accent-blue));
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }
        
        .theme-toggle:hover {
            transform: rotate(30deg);
        }
        
        /* وضع النهار */
        body.light-mode {
            --primary-color: #1E88E5;
            --secondary-color: #42A5F5;
            --light-bg: #F5F9FF;
            --text-dark: #2C3E50;
            --text-light: #546E7A;
            background: #f0f2f5;
            color: var(--text-dark);
        }
        
        body.light-mode .gradient-bg {
            background: linear-gradient(135deg, rgba(30, 136, 229, 0.8), rgba(66, 165, 245, 0.6));
        }
        
        body.light-mode .content-wrapper {
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.1);
        }
        
        body.light-mode header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        }
        
        body.light-mode .footer {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 1.8rem;
            }
            
            .preview-panel {
                padding: 20px;
            }
            
            .logo-container {
                width: 180px;
                height: 180px;
            }
            
            .page-title {
                font-size: 32px;
            }
            
            .slogan {
                font-size: 18px;
            }
            
            .navigation {
                flex-direction: column;
                align-items: center;
            }
            
            .floating-nav {
                bottom: 10px;
                padding: 8px 12px;
                overflow-x: auto;
                max-width: 95%;
            }
            
            .floating-nav-btn {
                width: 35px;
                height: 35px;
                font-size: 12px;
            }
            
            .theme-toggle {
                top: 10px;
                left: 10px;
                width: 40px;
                height: 40px;
                font-size: 16px;
            }
        }
        
        @media (max-width: 480px) {
            .logo-container {
                width: 150px;
                height: 150px;
            }
            
            .page-title {
                font-size: 28px;
            }
            
            .slogan {
                font-size: 16px;
            }
            
            .content-wrapper {
                margin: 10px;
                padding: 15px;
            }
            
            .section-header {
                padding: 10px 15px;
            }
            
            .section-content {
                padding: 15px;
            }
            
            .back-to-top {
                bottom: 80px;
                right: 15px;
                width: 45px;
                height: 45px;
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <!-- خلفية النجوم -->
    <div class="stars" id="stars"></div>
    <div class="twinkling"></div>
    <div class="gradient-bg"></div>
    
    <!-- شريط التقدم -->
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>
    
    <!-- زر تغيير المظهر -->
    <div class="theme-toggle" id="themeToggle">
        <i class="fas fa-moon"></i>
    </div>
    
    <!-- التنقل العائم -->
    <div class="floating-nav" id="floatingNav">
        <!-- سيتم ملؤه بالجافاسكريبت -->
    </div>
    
    <!-- زر العودة للأعلى -->
    <div class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </div>
    
    <div class="content-wrapper">
        <header>
            <h1><i class="fas fa-book"></i> دليل إدارة الصفحة - Rules Handbook</h1>
            <p class="description">الدليل الرسمي لإدارة الصفحة وتنظيم العمل</p>
        </header>
        
        <div class="logo-preview">
            <div class="logo-container">
                <img src="https://i.postimg.cc/MKYr2Wf3/IMG-2053.jpg" alt="Madridista Station Logo" class="logo-image">
            </div>
            <h2 class="page-title">Madridista Station</h2>
            <p class="slogan">Hala Madrid y Nada Más</p>
        </div>
        
        <div class="navigation">
            <button class="nav-btn" onclick="scrollToSection(0)">1- تقسيم الأوقات</button>
            <button class="nav-btn" onclick="scrollToSection(1)">2- التنسيق بين الأعضاء</button>
            <button class="nav-btn" onclick="scrollToSection(2)">3- المؤتمرات الصحفية</button>
            <button class="nav-btn" onclick="scrollToSection(3)">4- الصور والتحليلات</button>
            <button class="nav-btn" onclick="scrollToSection(4)">5- وقت المباريات</button>
            <button class="nav-btn" onclick="scrollToSection(5)">6- أنواع البوستات</button>
            <button class="nav-btn" onclick="scrollToSection(6)">7- توقيت البوستات</button>
            <button class="nav-btn" onclick="scrollToSection(7)">8- التصاميم والشعارات</button>
            <button class="nav-btn" onclick="scrollToSection(8)">9- ملاحظة</button>
        </div>
        
        <div class="preview-panel">
            <div id="handbookPreview">
                <!-- سيتم ملء هذا القسم ديناميكيًا -->
            </div>
        </div>
        
        <div class="footer">
            <p>Madridista Station © 2025 - كل الحقوق محفوظة</p>
            <div class="social-links">
                <a href="https://www.facebook.com/share/1BQwWbHfCv/" target="_blank"><i class="fab fa-facebook"></i></a>
            </div>
        </div>
    </div>

    <script>
        // بيانات الأقسام
        const sectionsData = [
            {
                title: "1- تقسيم الأوقات",
                icon: "fas fa-clock",
                points: [
                    "كل شخص بيستلم فترة محددة لوحده.",
                    "مثال: من 4 لـ 7 يتم إنزال بوست كل 20 – 25 دقيقة.",
                    "في حالة وجود خبر مهم حتى لو نازل بوست من دقائق، الخبر بينزل فورًا."
                ]
            },
            {
                title: "2- التنسيق بين الأعضاء",
                icon: "fas fa-users",
                points: [
                    "لو حد عايز ينزل بوست في وقت غيره: يبلغ المسؤول عن الفترة.",
                    "المسؤول يحدد أنسب توقيت للبوست.",
                    "بعد نزول البوست، المسؤول يرجع يستكمل عادي."
                ]
            },
            {
                title: "3- المؤتمرات الصحفية",
                icon: "fas fa-microphone",
                points: [
                    "ممكن تتغطى في بوست واحد مع إغلاق الكومنتات واستكمال التفاصيل في التعليقات.",
                    "أو تتغطى عبر أكثر من بوست حسب طبيعة المؤتمر."
                ]
            },
            {
                title: "4- الصور والتحليلات",
                icon: "fas fa-image",
                points: [
                    "أي بوست تحليلي أو محتاج صورة لاعب لازم يكون بجودة عالية جدًا.",
                    "في أول فترة لأي عضو جديد: يفضل مراجعة سليمان لأي بوست تحليلي قبل نشره."
                ]
            },
            {
                title: "5- وقت المباريات",
                icon: "fas fa-futbol",
                points: [
                    "شخص واحد فقط مسؤول عن التغطية أثناء المباراة (احمد عمرو).",
                    "بعد نهاية الشوط الأول: لو حد عايز ينزل بوست، يستأذن من المسؤول، والمسؤول يحدد له وقت وينزل البوست.",
                    "بعد المباراة: يتم الحديث عن الإيجابيات فقط، وفي اليوم التالي يتم تناول السلبيات (مدرب – لاعب – تكتيك)."
                ]
            },
            {
                title: "6- أنواع البوستات",
                icon: "fas fa-list",
                points: [
                    "بوستات مباشرة → بتنزل فورًا.",
                    "بوستات مجدولة → تتحدد بوقت وتنزل أوتوماتيك.",
                    "بوستات درافت → تتحط مسودة ويتم نشرها وقت ما يكون مناسب."
                ]
            },
            {
                title: "7- التوقيت المناسب للبوستات",
                icon: "fas fa-calendar-alt",
                points: [
                    "اختيار التوقيت عامل مهم جدًا لنجاح التفاعل.",
                    "مع الخبرة هتعرف تحدد أفضل توقيت، لكن مثال:",
                    "مباراة البرازيل × تشيلي: البوست كان جاهز من الفجر، واتجدول على 10:50 صباحًا → الناس كانت صحيت وتفاعلت.",
                    "لو كان نزل بعد المباراة مباشرة → التفاعل كان هيكون ضعيف (الناس نايمة أو مش مركزة)."
                ]
            },
            {
                title: "8- التصاميم والشعارات الرسمية",
                icon: "fas fa-paint-brush",
                points: [
                    "تشكيلة الفريق بتنزل بتصميم خاص بالصفحة فقط.",
                    "يوجد لوجو رئيسي للصفحة يُستخدم في كل التصاميم.",
                    "يوجد لوجو خاص بالمؤتمر الصحفي.",
                    "يوجد لوجو خاص للكوميكس.",        
                    "يوجد تصاميم وصور خاصة لرجل المباراة لكل ماتش.",
                    "كل هذه التصاميم من إنتاج الصفحة حصريًا ولا يُستخدم غيرها."
                ]
            },
            {
                title: "9- ملاحظة",
                icon: "fas fa-lightbulb",
                points: [
                    "كل ما سبق إرشادات نظرية.",
                    "التطبيق العملي هو اللي هيوضح الصورة بشكل أوضح مع الوقت."
                ]
            }
        ];

        // عناصر DOM
        const handbookPreview = document.getElementById('handbookPreview');
        const starsContainer = document.getElementById('stars');
        const progressBar = document.getElementById('progressBar');
        const floatingNav = document.getElementById('floatingNav');
        const backToTop = document.getElementById('backToTop');
        const themeToggle = document.getElementById('themeToggle');
        let lastScrollTop = 0;

        // إنشاء النجوم
        function createStars() {
            const starsCount = 200;
            
            for (let i = 0; i < starsCount; i++) {
                const star = document.createElement('div');
                star.classList.add('star');
                
                const size = Math.random() * 3;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                
                star.style.top = `${Math.random() * 100}%`;
                star.style.left = `${Math.random() * 100}%`;
                
                const duration = Math.random() * 5 + 3;
                star.style.animationDuration = `${duration}s`;
                star.style.animationDelay = `${Math.random() * 5}s`;
                
                starsContainer.appendChild(star);
            }
        }

        // تحديث شريط التقدم
        function updateProgressBar() {
            const windowHeight = window.innerHeight;
            const documentHeight = document.documentElement.scrollHeight - windowHeight;
            const scrollPosition = window.scrollY;
            const progress = (scrollPosition / documentHeight) * 100;
            progressBar.style.width = `${progress}%`;
        }

        // إظهار/إخفاء زر العودة للأعلى
        function toggleBackToTop() {
            if (window.scrollY > 300) {
                backToTop.classList.add('visible');
            } else {
                backToTop.classList.remove('visible');
            }
        }

        // إظهار/إخفاء القائمة العائمة بناءً على اتجاه التمرير
        function toggleFloatingNav() {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            
            if (scrollTop > lastScrollTop && scrollTop > 200) {
                floatingNav.classList.add('hidden');
            } else {
                floatingNav.classList.remove('hidden');
            }
            
            lastScrollTop = scrollTop;
        }

        // إنشاء القائمة العائمة
        function createFloatingNav() {
            let navHTML = '';
            
            sectionsData.forEach((section, index) => {
                navHTML += `<button class="floating-nav-btn" onclick="scrollToSection(${index})">${index + 1}</button>`;
            });
            
            floatingNav.innerHTML = navHTML;
        }

        // تحديث القائمة العائمة النشطة
        function updateActiveNav() {
            const sections = document.querySelectorAll('.section');
            const navButtons = document.querySelectorAll('.floating-nav-btn');
            
            sections.forEach((section, index) => {
                const rect = section.getBoundingClientRect();
                
                if (rect.top <= 100 && rect.bottom >= 100) {
                    navButtons.forEach(btn => btn.classList.remove('active'));
                    if (navButtons[index]) {
                        navButtons[index].classList.add('active');
                    }
                }
            });
        }

        // كشف العناصر عند التمرير
        function checkVisibility() {
            const sections = document.querySelectorAll('.section');
            
            sections.forEach(section => {
                const rect = section.getBoundingClientRect();
                const isVisible = (rect.top <= window.innerHeight - 100 && rect.bottom >= 0);
                
                if (isVisible) {
                    section.classList.add('visible');
                }
            });
        }

        // التمرير إلى قسم معين
        function scrollToSection(index) {
            const section = document.getElementById(`section-${index}`);
            if (section) {
                const headerOffset = 80;
                const elementPosition = section.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
                
                window.scrollTo({
                    top: offsetPosition,
                    behavior: 'smooth'
                });
                
                // إضافة تأثير تمييز مؤقت
                section.style.backgroundColor = 'rgba(255, 152, 0, 0.1)';
                setTimeout(() => {
                    section.style.backgroundColor = '';
                }, 2000);
            }
        }

        // تبديل وضع النهار/الليل
        function toggleTheme() {
            document.body.classList.toggle('light-mode');
            const icon = themeToggle.querySelector('i');
            
            if (document.body.classList.contains('light-mode')) {
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
                localStorage.setItem('theme', 'light');
            } else {
                icon.classList.remove('fa-sun');
                icon.classList.add('fa-moon');
                localStorage.setItem('theme', 'dark');
            }
        }

        // التحقق من وضع الألوان المحفوظ
        function checkSavedTheme() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'light') {
                document.body.classList.add('light-mode');
                const icon = themeToggle.querySelector('i');
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
            }
        }

        // عرض المعاينة
        function renderPreview() {            
            let previewHTML = '';
            
            sectionsData.forEach((section, index) => {
                previewHTML += `
                    <div class="section" id="section-${index}">
                        <div class="section-header" onclick="toggleSection(${index})">
                            <i class="${section.icon}"></i> ${section.title}
                            <i class="fas fa-chevron-down toggle-icon" style="margin-right: auto;"></i>
                        </div>
                        <div class="section-content">
                            <ul>
                                ${section.points.map(point => `<li>${point}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            });
            
            handbookPreview.innerHTML = previewHTML;
        }

        // تبديل حالة القسم (مفتوح/مغلق)
        function toggleSection(index) {
            const section = document.getElementById(`section-${index}`);
            const icon = section.querySelector('.toggle-icon');
            
            section.classList.toggle('collapsed');
            
            if (section.classList.contains('collapsed')) {
                icon.classList.remove('fa-chevron-down');
                icon.classList.add('fa-chevron-up');
            } else {
                icon.classList.remove('fa-chevron-up');
                icon.classList.add('fa-chevron-down');
            }
        }

        // تهيئة الصفحة
        document.addEventListener('DOMContentLoaded', function() {
            createStars();
            renderPreview();
            createFloatingNav();
            checkSavedTheme();
            
            // إضافة مستمعي الأحداث
            window.addEventListener('scroll', function() {
                updateProgressBar();
                toggleBackToTop();
                toggleFloatingNav();
                updateActiveNav();
                checkVisibility();
            });
            
            backToTop.addEventListener('click', function() {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
            
            themeToggle.addEventListener('click', toggleTheme);
            
            // التحقق من العناصر المرئية عند التحميل
            setTimeout(checkVisibility, 100);
        });
    </script>
</body>
</html>